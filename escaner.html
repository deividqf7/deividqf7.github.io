<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Esc√°ner Futurista FACASX</title>
  <script src="https://unpkg.com/@zxing/library@latest"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: radial-gradient(circle at center, #0a0f2c, #000);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      overflow: hidden;
    }
    h1 {
      color: #00aaff;
      text-shadow: 0 0 15px #00aaff;
    }
    #scanner {
      border: 3px solid #00aaff;
      border-radius: 20px;
      width: 320px;
      height: 240px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(145deg, #0d1b2a, #1b263b);
      box-shadow: 0 0 20px #00aaff;
      position: relative;
      overflow: hidden;
    }
    #preview {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
    }
    #camera-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #ccc;
    }
    #camera-placeholder img {
      width: 80px;
      opacity: 0.7;
    }
    #scan-line {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, transparent, #00ffff, transparent);
      animation: scan 2s infinite;
      display: none;
    }
    @keyframes scan {
      0% { top: 0; }
      50% { top: calc(100% - 3px); }
      100% { top: 0; }
    }
    #resultado {
      margin-top: 20px;
      padding: 10px;
      width: 320px;
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      box-shadow: 0 0 10px #00aaff;
      display: none;
    }
    button {
      background: #00aaff;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 10px 20px;
      margin: 10px;
      cursor: pointer;
      font-size: 1em;
      transition: background 0.3s, transform 0.2s;
    }
    button:hover {
      background: #0077cc;
      transform: scale(1.05);
    }
    #resetButton {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Esc√°ner Futurista FACASX</h1>

  <div id="scanner">
    <video id="camera" autoplay playsinline style="width:100%;height:100%;border-radius:20px;"></video>
    <img id="preview" alt="Foto del producto">
    <div id="camera-placeholder">
      <img src="https://static.vecteezy.com/system/resources/previews/009/266/389/non_2x/camera-icon-design-free-png.png" alt="C√°mara">
      <p>Escanea el c√≥digo</p>
    </div>
    <div id="scan-line"></div>
  </div>

  <div id="resultado"></div>

  <button id="resetButton">Reiniciar</button>

  <audio id="success-sound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>
  <audio id="error-sound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>

  <script>
    const productos = {
      "7709947664513": {
        nombre: "Volt Energizante 300 ml",
        tipo: "PET 1",
        reciclaje: "L√°valo, retira etiqueta y depos√≠tala en contenedor de pl√°sticos reciclables.",
        descripcion: "Bebida energ√©tica popular en envase PET transparente.",
        impacto: "Reciclar esta botella ahorra suficiente energ√≠a para encender un bombillo 6 horas.",
        calorias: "110 kcal",
        ingredientes: "Agua, az√∫car, cafe√≠na, saborizantes"
      },
      "7702001111008": {
        nombre: "Coca-Cola 400 ml",
        tipo: "PET 1",
        reciclaje: "Retira la tapa y etiqueta, enjuaga y deposita en contenedor de reciclaje.",
        descripcion: "Refresco cl√°sico de cola en envase PET.",
        impacto: "Cada botella reciclada evita emisi√≥n de CO‚ÇÇ y residuos en oc√©anos.",
        calorias: "140 kcal",
        ingredientes: "Agua carbonatada, az√∫car, colorante, saborizantes"
      },
      "7702001011001": {
        nombre: "Postob√≥n Manzana 500 ml",
        tipo: "PET 1",
        reciclaje: "Enjuaga y separa de materiales no reciclables.",
        descripcion: "Refresco de manzana en envase PET.",
        impacto: "Reciclar ayuda a reducir residuos y consumo de energ√≠a.",
        calorias: "120 kcal",
        ingredientes: "Agua, az√∫car, saborizante de manzana"
      },
      "7702011011015": {
        nombre: "Agua Cristal 600 ml",
        tipo: "PET 1",
        reciclaje: "Lava la botella, retira etiqueta y apl√°stala para ahorrar espacio.",
        descripcion: "Agua mineral embotellada.",
        impacto: "Reciclar una botella ahorra energ√≠a para encender bombillo 6 horas.",
        calorias: "0 kcal",
        ingredientes: "Agua mineral"
      },
      "7709992001008": {
        nombre: "Pepsi 400 ml",
        tipo: "PET 1",
        reciclaje: "Lava la botella y depos√≠tala junto con otros pl√°sticos reciclables.",
        descripcion: "Refresco de cola en envase PET.",
        impacto: "Reciclar reduce residuos y CO‚ÇÇ.",
        calorias: "140 kcal",
        ingredientes: "Agua carbonatada, az√∫car, colorante, saborizantes"
      },
      "7701234567890": {
        nombre: "Gatorade Naranja 500 ml",
        tipo: "PET 1",
        reciclaje: "Enjuaga la botella y depos√≠tala en el contenedor de reciclaje de pl√°sticos.",
        descripcion: "Bebida hidratante con electrolitos, ideal para deportistas.",
        impacto: "Reciclar ayuda a reducir el uso de petr√≥leo en nuevos envases.",
        calorias: "80 kcal",
        ingredientes: "Agua, az√∫car, electrolitos, saborizantes naturales"
      },
      "7708887776661": {
        nombre: "Milo Botella 240 ml",
        tipo: "PET 1",
        reciclaje: "Lava la botella y separa la tapa para reciclarla correctamente.",
        descripcion: "Bebida de malta y cacao con alto valor energ√©tico.",
        impacto: "Reciclar esta botella evita que el pl√°stico llegue al oc√©ano.",
        calorias: "130 kcal",
        ingredientes: "Leche, malta, cacao, az√∫car"
      },
      "7705554443332": {
        nombre: "Bon Ice Fresa 300 ml",
        tipo: "PET 1",
        reciclaje: "Depos√≠talo en el contenedor de pl√°sticos tras enjuagarlo.",
        descripcion: "Refresco sabor fresa con gas ligero.",
        impacto: "Reciclar una botella reduce el consumo de energ√≠a industrial.",
        calorias: "100 kcal",
        ingredientes: "Agua, az√∫car, saborizantes artificiales de fresa"
      },
      "7709998887773": {
        nombre: "Hit Mora Azul 500 ml",
        tipo: "PET 1",
        reciclaje: "Lava el envase y depos√≠talo en el contenedor de reciclaje.",
        descripcion: "Jugo de mora azul con alto contenido en vitamina C.",
        impacto: "Reciclar ayuda a conservar recursos naturales.",
        calorias: "90 kcal",
        ingredientes: "Agua, az√∫car, concentrado de mora azul, vitamina C"
      },
      "7703332221114": {
        nombre: "Colombiana 400 ml",
        tipo: "PET 1",
        reciclaje: "Retira la etiqueta, enjuaga y aplasta para reciclarla.",
        descripcion: "Refresco tradicional colombiano de sabor √∫nico.",
        impacto: "Reciclar ayuda a mantener limpios los r√≠os y mares.",
        calorias: "145 kcal",
        ingredientes: "Agua carbonatada, az√∫car, colorante, saborizantes"
      },

      // üîπ Productos a√±adidos por Deivid
      "7702090042139": {
        nombre: "Uva Postob√≥n 250 ml",
        tipo: "PET 1",
        reciclaje: "Lava el envase, retira etiqueta y depos√≠talo en reciclaje de pl√°sticos.",
        descripcion: "Refresco sabor uva en presentaci√≥n peque√±a y pr√°ctica.",
        impacto: "Reciclar ayuda a disminuir la contaminaci√≥n pl√°stica en fuentes h√≠dricas.",
        calorias: "105 kcal",
        ingredientes: "Agua carbonatada, az√∫car, saborizante de uva"
      },
      "7707151701031": {
        nombre: "Colombiana Cero 350 ml",
        tipo: "PET 1",
        reciclaje: "Enjuaga y depos√≠tala en el contenedor de pl√°sticos reciclables.",
        descripcion: "Versi√≥n sin az√∫car de la tradicional Colombiana.",
        impacto: "Reciclar permite aprovechar el PET para nuevos envases.",
        calorias: "0 kcal",
        ingredientes: "Agua carbonatada, edulcorantes, saborizantes"
      },
      "7702057075088": {
        nombre: "Alcohol MK 350 ml",
        tipo: "PET 1",
        reciclaje: "Enjuaga el envase y depos√≠talo en el contenedor de reciclaje de pl√°sticos.",
        descripcion: "Alcohol antis√©ptico para desinfecci√≥n y limpieza.",
        impacto: "Reciclar reduce residuos y evita acumulaci√≥n de pl√°sticos en vertederos.",
        calorias: "No aplica",
        ingredientes: "Alcohol et√≠lico al 70%, agua"
      },
      "7707133083216": {
        nombre: "Hit Mora 500 ml",
        tipo: "PET 1",
        reciclaje: "Retira etiqueta, enjuaga y depos√≠talo en reciclaje de pl√°sticos.",
        descripcion: "Jugo natural de mora con az√∫car moderada.",
        impacto: "Reciclar reduce el impacto ambiental y fomenta la econom√≠a circular.",
        calorias: "95 kcal",
        ingredientes: "Agua, concentrado de mora, az√∫car, vitamina C"
      }
    };

    const camera = document.getElementById('camera');
    const preview = document.getElementById('preview');
    const resultado = document.getElementById('resultado');
    const cameraPlaceholder = document.getElementById('camera-placeholder');
    const scanLine = document.getElementById('scan-line');
    const resetButton = document.getElementById('resetButton');
    const successSound = document.getElementById('success-sound');
    const errorSound = document.getElementById('error-sound');

    const codeReader = new ZXing.BrowserMultiFormatReader();

    async function iniciarCamara() {
      try {
        const devices = await codeReader.listVideoInputDevices();
        if (devices.length === 0) throw new Error('No hay c√°mara disponible');

        const selectedDeviceId = devices[0].deviceId;
        scanLine.style.display = 'block';
        resultado.style.display = 'block';
        resultado.innerHTML = "<p>Escaneando...</p>";

        codeReader.decodeFromVideoDevice(selectedDeviceId, camera, (result, err) => {
          if (result) {
            const codigo = result.text.trim();
            if (productos[codigo]) {
              const p = productos[codigo];
              successSound.play();
              cameraPlaceholder.style.display = 'none';
              preview.style.display = 'block';
              camera.style.display = 'none';
              scanLine.style.display = 'none';
              resultado.innerHTML = `
                <h3>${p.nombre}</h3>
                <p><strong>Tipo:</strong> ${p.tipo}</p>
                <p><strong>Reciclaje:</strong> ${p.reciclaje}</p>
                <p><strong>Descripci√≥n:</strong> ${p.descripcion}</p>
                <p><strong>Impacto:</strong> ${p.impacto}</p>
                <p><strong>Calor√≠as:</strong> ${p.calorias}</p>
                <p><strong>Ingredientes:</strong> ${p.ingredientes}</p>
              `;
              codeReader.reset();
              resetButton.style.display = 'inline-block';
            } else {
              resultado.innerHTML = "<p>Producto no reconocido.</p>";
              errorSound.play();
            }
          }
        });
      } catch (error) {
        resultado.innerHTML = "<p>Error al acceder a la c√°mara.</p>";
      }
    }

    resetButton.addEventListener('click', () => {
      resultado.style.display = 'none';
      preview.style.display = 'none';
      cameraPlaceholder.style.display = 'flex';
      camera.style.display = 'block';
      resetButton.style.display = 'none';
      iniciarCamara();
    });

    window.onload = iniciarCamara;
  </script>
</body>
</html>
